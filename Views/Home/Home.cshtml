@model IEnumerable<Politico.Models.Constituency>

@{
    ViewBag.Title = "Home";
}

<!--Middle Start-->
<div class="content_main">
    <div class="content">
        <!--Left Panel start-->
        <div class="left">
            <div id="MPList" class="party_member">
                <div class="heading_all">
                    <div class="parties_heading">
                        <h2>Parties</h2>
                    </div>
                    <div class="mp_heading">
                        <h2>Member of Parliament</h2>
                    </div>
                    <div class="mpr_heading">
                        <h2>MP Rating</h2>
                    </div>
                </div>
            </div>
        </div>
        <!--Right panel start-->
        <div class="right">
            <div class="right_inner">
                <h1>Find out who should be voted four ...</h1>
                <div class="liquid-slider" id="main-slider">
                    <div class="quns_slider">
                        <span class="qns">
                            <p>Q</p>
                        </span>
                        <div class="text">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard</div>
                    </div>
                    <div class="quns_slider">
                        <span class="qns">
                            <p>Q</p>
                        </span>
                        <div class="text">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard</div>
                    </div>
                    <div class="quns_slider">
                        <span class="qns">
                            <p>Q</p>
                        </span>
                        <div class="text">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard</div>
                    </div>
                </div>
                <div class="radio_ans">
                    <span class="ans">
                        <p>A</p>
                    </span>
                    <ul class="ans_radio">
                        <li>
                            <input type="radio" name="radiog_dark" id="radio5" class="css-checkbox" checked="checked" />
                            <label for="radio5" class="css-label">Yes</label>
                        </li>
                        <li>
                            <input type="radio" name="radiog_dark" id="radio4" class="css-checkbox" />
                            <label for="radio4" class="css-label">No</label>
                        </li>
                    </ul>
                </div>
                <div class="clr"></div>
                <h1 class="margin-top30">Your Result</h1>
                <div class="result">
                    <div class="party">
                        <div class="color_red"></div>
                        <div class="party_name">Aam Aadmi Party</div>
                        <div class="voting">: 60%</div>
                    </div>
                    <div class="party">
                        <div class="color_blue"></div>
                        <div class="party_name">Aam Aadmi Party</div>
                        <div class="voting">: 60%</div>
                    </div>
                    <div class="party">
                        <div class="color_green"></div>
                        <div class="party_name">Aam Aadmi Party</div>
                        <div class="voting">: 60%</div>
                    </div>
                </div>
                <div class="clr"></div>
            </div>
        </div>
    </div>
</div>
<!--Middle End-->

<script type="text/javascript">
    $(document).ready(function () {
        //syntax highlighter
        hljs.tabReplace = '    ';
        hljs.initHighlightingOnLoad();

        $.fn.slideFadeToggle = function (speed, easing, callback) {
            return this.animate({ opacity: 'toggle', height: 'toggle' }, speed, easing, callback);
        };

        //accordion
        $('.accordion').accordion({
            defaultOpen: 'none',
            cookieName: 'accordion_nav',
            speed: 'slow',
            animateOpen: function (elem, opts) { //replace the standard slideUp with custom function
                elem.next().stop(true, true).slideFadeToggle(opts.speed);
            },
            animateClose: function (elem, opts) { //replace the standard slideDown with custom function
                elem.next().stop(true, true).slideFadeToggle(opts.speed);
            }
        });

        $('#section1').addClass('accordion-close');
    });
</script>

<script>
    $('#main-slider').liquidSlider();
</script>

<script>
    $(document).ready(function () {
        $.ajax({
            url: '/Home/LoadMpProfile',
            type: "GET",
            dataType: "json",
            data: { constituency: @Html.Raw(Json.Encode(ViewBag.Constituency)) }, 
            success: function (data) {                                  
                $.each(data, function (key, value) {                    
                    var html =  '<div class="left_inner">' +
                                    '<div class="parties">' +                          
                                        '<img src="/images/Application/Party/' + value['partyImage'] + '" width="75" height="76" alt="" /><span>' + value['title'] +
                                    '</div>' +
                                    '<div class="mp">' +                          
                                        '<img src="/images/Application/MP/' + value['MPImage'] + '" width="75" height="76" alt="" />' +
                                    '<div class="mp_detail_outer">' +
                                    '<div class="mp_detail">' +
                                        '<p><b>Name:</b> ' + value['firstName'] + ' ' + value['middleName'] + ' ' + value['lastName'] + '</p>' +
                                    '</div>' +
                                    '<div class="mp_detail">' +
                                        '<p><b>Education:</b> ' + value['qualification'] + '</p>' +
                                    '</div>' +
                                    '<div class="mp_detail">' +
                                        '<p><b>Year in Politics:</b> ' + value['electedYear'] + '</p>' +
                                    '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="mpr">' +                          
                                    '<div id="RatingList' + key + '" class="mpr_detail_outer">' +

                                    '</div>' +
                                '</div>' +
                                  '<div class="commnet"></div>' +
                                  '<div class="accordion commnet_btn accordion-close" id="section' + key + '">Comment<span></span></div>' +
                                  '<div comment_outer" style="display: none;">' +
                                      '<div class="commnet_box">' +
                                          '<textarea name="textarea" class="comment_box" cols="45" rows="5" id="textarea"></textarea>' +
                                          '<div class="post_comment">Post Comment</div>' +
                                      '</div>' +
                                      '<div class="commnet_left">' +
                                          '<div class="read_comment">' +
                                              '<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>' +
                                          '</div>' +
                                          '<div class="user_detal">' +
                                              '<div class="name">Talwinder Singh</div>' +
                                              '<div class="day">Thursday,</div>' +
                                              '<div class="month">January 4th,</div>' +
                                              '<div class="year">2014,</div>' +
                                              '<div class="time">12:35</div>' +
                                              '<div class="read_more">read more &raquo;</div>' +
                                          '</div>' +
                                      '</div>' +
                                      '<div class="commnet_left">' +
                                          '<div class="read_comment">' +
                                              '<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>' +
                                          '</div>' +
                                          '<div class="user_detal">' +
                                              '<div class="name">Talwinder Singh</div>' +
                                              '<div class="day">Thursday,</div>' +
                                              '<div class="month">January 4th,</div>' +
                                              '<div class="year">2014,</div>' +
                                              '<div class="time">12:35</div>' +
                                              '<div class="read_more">read more &raquo;</div>' +
                                          '</div>' +
                                      '</div>' +
                                    '</div>'+
                                    '</div>';

                    $('#MPList').append(html);  

                    $.ajax({
                        url: '/Home/LoadRating',
                        type: "GET",
                        dataType: "json",
                        data: { MPID: value['ID'] }, 
                        success: function (data) {                                 
                            $.each(data, function (ikey, ivalue) {   
                                var ihtml = '<div class="mpr_detail">' +
                                            '<p><b>' + ivalue['title'] + ': </b></p>' +
                                            '<div id="' + ivalue['title'] + key + '" class="rating_star">' + 
                                            '</div>' +                                 
                                            '<div class="users">' + ivalue['noOfUsers'] + ' users' + 
                                            '</div>' +
                                        '</div>';                                
                                $('#RatingList' + key).append(ihtml);  
                                RateIt(ivalue['title'] + key, ivalue['rating'], ivalue['sectorID'], value['ID']);
                            });                                          
                        },
                        error: function (error) {                
                            alert('Error');
                        }
                    })                                                
                });                                          
            },
            error: function (error) {                
                alert('Error');
            }
        })
    });
</script>

<script>
    $.fn.raty.defaults.path = '/Images/Application/Rating';

    function RateIt(title, rating, sectorID, MPID) {    
        $('#' + title).raty({
            half: true,
            path: null,
            starHalf: '/Images/Application/Rating/star-half.png',
            starOff: '/Images/Application/Rating/star-off.png',
            starOn: '/Images/Application/Rating/star-on.png',
            score: rating,           
            click: function(score, evt) {
                $('#' + title).raty({
                    readOnly: true,
                    score: score,           
                });       
                $.ajax({
                    url: '/Home/SaveComment',
                    type: "POST",
                    dataType: "json",
                    data: { rating: score, comment: '', sectorID: sectorID, MPID: MPID}, 
                    success: function (data) {                                                                                 
                        alert('You rate it (' + score + ')');
                    },
                    error: function (error) {                
                        alert('Error');
                    }
                })     
            }
        });         
    }
</script>
